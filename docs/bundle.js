var app=function(){"use strict";function n(){}function e(n,e){for(const t in e)n[t]=e[t];return n}function t(n){return n()}function r(){return Object.create(null)}function o(n){n.forEach(t)}function c(n){return"function"==typeof n}function s(n,e){return n!=n?e==e:n!==e||n&&"object"==typeof n||"function"==typeof n}function i(n,e,t){n.insertBefore(e,t||null)}function a(n){n.parentNode.removeChild(n)}function l(n){return document.createElement(n)}function u(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function f(n){return document.createTextNode(n)}function h(){return f(" ")}function d(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function p(n,e,t){null==t?n.removeAttribute(e):n.setAttribute(e,t)}let g;function m(n){g=n}function y(n){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(n)}const $=[],x=Promise.resolve();let v=!1;const w=[],_=[],b=[];function M(n){_.push(n)}function k(){const n=new Set;do{for(;$.length;){const n=$.shift();m(n),S(n.$$)}for(;w.length;)w.shift()();for(;_.length;){const e=_.pop();n.has(e)||(e(),n.add(e))}}while($.length);for(;b.length;)b.pop()();v=!1}function S(n){n.fragment&&(n.update(n.dirty),o(n.before_render),n.fragment.p(n.dirty,n.ctx),n.dirty=null,n.after_render.forEach(M))}let E;function N(n,e){var t;t=(()=>{!function(n,e){n.d(1),e.delete(n.key)}(n,e)}),E.callbacks.push(t),n.o(1)}function A(n,e,r){const{fragment:s,on_mount:i,on_destroy:a,after_render:l}=n.$$;s.m(e,r),M(()=>{const e=i.map(t).filter(c);a?a.push(...e):o(e),n.$$.on_mount=[]}),l.forEach(M)}function C(n,e){n.$$.dirty||($.push(n),v||(v=!0,x.then(k)),n.$$.dirty=r()),n.$$.dirty[e]=!0}function T(e,t,c,s,i,a){const l=g;m(e);const u=t.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:n,not_equal:i,bound:r(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(l?l.$$.context:[]),callbacks:r(),dirty:null};let h=!1;var d;f.ctx=c?c(e,u,(n,t)=>{f.ctx&&i(f.ctx[n],f.ctx[n]=t)&&(f.bound[n]&&f.bound[n](t),h&&C(e,n))}):u,f.update(),h=!0,o(f.before_render),f.fragment=s(f.ctx),t.target&&(t.hydrate?f.fragment.l((d=t.target,Array.from(d.childNodes))):f.fragment.c(),t.intro&&e.$$.fragment.i&&e.$$.fragment.i(),A(e,t.target,t.anchor),k()),m(l)}class P{$destroy(){var e,t;t=!0,(e=this).$$&&(o(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=n}$on(n,e){const t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(e),()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}$set(){}}function j(e){var t,r,o;return{c(){p(t=u("circle"),"cx",e.x),p(t,"cy",e.y),p(t,"r",e.r),p(t,"fill",r="hsla("+e.hue+", 100%, "+e.lightness+"%, "+e.alpha+")"),p(t,"stroke",o="hsla("+e.hue+",\n  50%, 20%, "+e.alpha),p(t,"stroke-width","0.003")},m(n,e){i(n,t,e)},p(n,e){n.x&&p(t,"cx",e.x),n.y&&p(t,"cy",e.y),n.r&&p(t,"r",e.r),(n.hue||n.lightness||n.alpha)&&r!==(r="hsla("+e.hue+", 100%, "+e.lightness+"%, "+e.alpha+")")&&p(t,"fill",r),(n.hue||n.alpha)&&o!==(o="hsla("+e.hue+",\n  50%, 20%, "+e.alpha)&&p(t,"stroke",o)},i:n,o:n,d(n){n&&a(t)}}}function q(n,e,t){let{x:r,y:o,r:c,hue:s,lightness:i,alpha:a}=e;return n.$set=(n=>{"x"in n&&t("x",r=n.x),"y"in n&&t("y",o=n.y),"r"in n&&t("r",c=n.r),"hue"in n&&t("hue",s=n.hue),"lightness"in n&&t("lightness",i=n.lightness),"alpha"in n&&t("alpha",a=n.alpha)}),{x:r,y:o,r:c,hue:s,lightness:i,alpha:a}}class B extends P{constructor(n){super(),T(this,n,q,j,s,["x","y","r","hue","lightness","alpha"])}}const L=performance.now();function O(){return 2*Math.random()-1}function F(n,e){const t=Math.random()<.5?-1:1;return(Math.random()*(e-n)+n)*t}let G=0;function z(){return{id:G++,r:Math.random()/20+.01,rSpeed:F(.1,.3),x:O(),xSpeed:F(1,3),y:O(),ySpeed:F(1,3),hue:(Math.floor(60*Math.random())+Math.floor(.01*(performance.now()-L)))%360,lightness:50,alpha:0}}const I=.001,R=.5,U=4;const V=.15,X=5;function Y(n,e,t,r,o){const c=t-n,s=r-e,i=c**2+s**2,a=X*o/(i+Math.sqrt(i*V));return[c*a,s*a]}function D(n,e,t){return n.map(r=>{const[o,c]=function(n,e,{x:t,y:r}){return n.reduce((n,{r:e,x:o,y:c})=>{if(t===o&&r===c)return n;const s=Y(t,r,o,c,e);return[n[0]+s[0],n[1]+s[1]]},Y(t,r,e.x,e.y,e.r))}(n,e,r),s=r.xSpeed+o*t,i=r.ySpeed+c*t;return{...r,xSpeed:s,ySpeed:i}})}function H(n,e,t){const r=Object.create(n);return r.circle=e[t],r}function J(n,t){var r,o,c=[t.circle];let s={};for(var l=0;l<c.length;l+=1)s=e(s,c[l]);var u=new B({props:s});return{key:n,first:null,c(){r=f(""),u.$$.fragment.c(),this.first=r},m(n,e){i(n,r,e),A(u,n,e),o=!0},p(n,e){var t=n.circles?function(n,e){const t={},r={},o={$$scope:1};let c=n.length;for(;c--;){const s=n[c],i=e[c];if(i){for(const n in s)n in i||(r[n]=1);for(const n in i)o[n]||(t[n]=i[n],o[n]=1);n[c]=i}else for(const n in s)o[n]=1}for(const n in r)n in t||(t[n]=void 0);return t}(c,[e.circle]):{};u.$set(t)},i(n){o||(u.$$.fragment.i(n),o=!0)},o(n){u.$$.fragment.o(n),o=!1},d(n){n&&a(r),u.$destroy(n)}}}function K(n){var e,t,r,c,s,f,g,m=[],y=new Map,$=n.circles;const x=n=>n.circle.id;for(var v=0;v<$.length;v+=1){let e=H(n,$,v),t=x(e);y.set(t,m[v]=J(t,e))}return{c(){for(e=u("svg"),v=0;v<m.length;v+=1)m[v].c();t=h(),(r=l("h1")).textContent="CIRCULATE",c=h(),(s=l("footer")).textContent="Ben Gladman 2019",p(e,"viewBox","-1 -1 2 2"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","svelte-oy670g"),r.className="svelte-oy670g",s.className="svelte-oy670g",g=[d(e,"mousemove",n.handleMousemove),d(e,"mouseleave",n.handleMouseleave)]},m(o,a){for(i(o,e,a),v=0;v<m.length;v+=1)m[v].m(e,null);var l;l=(()=>n.svg_1_binding(e,null)),w.push(l),i(o,t,a),i(o,r,a),i(o,c,a),i(o,s,a),f=!0},p(n,t){const r=t.circles;E={remaining:0,callbacks:[]},m=function(n,e,t,r,o,c,s,i,a,l,u,f){let h=n.length,d=c.length,p=h;const g={};for(;p--;)g[n[p].key]=p;const m=[],y=new Map,$=new Map;for(p=d;p--;){const n=f(o,c,p),i=t(n);let a=s.get(i);a?r&&a.p(e,n):(a=l(i,n)).c(),y.set(i,m[p]=a),i in g&&$.set(i,Math.abs(p-g[i]))}const x=new Set,v=new Set;function w(n){n.i&&n.i(1),n.m(i,u),s.set(n.key,n),u=n.first,d--}for(;h&&d;){const e=m[d-1],t=n[h-1],r=e.key,o=t.key;e===t?(u=e.first,h--,d--):y.has(o)?!s.has(r)||x.has(r)?w(e):v.has(o)?h--:$.get(r)>$.get(o)?(v.add(r),w(e)):(x.add(o),h--):(a(t,s),h--)}for(;h--;){const e=n[h];y.has(e.key)||a(e,s)}for(;d;)w(m[d-1]);return m}(m,n,x,1,t,r,y,e,N,J,null,H),E.remaining||o(E.callbacks),n.items&&(t.svg_1_binding(null,e),t.svg_1_binding(e,null))},i(n){if(!f){for(var e=0;e<$.length;e+=1)m[e].i();f=!0}},o(n){for(v=0;v<m.length;v+=1)m[v].o();f=!1},d(i){for(i&&a(e),v=0;v<m.length;v+=1)m[v].d();n.svg_1_binding(null,e),i&&(a(t),a(r),a(c),a(s)),o(g)}}}const Q=30,W=1e-4;function Z(n,e,t){let r,o,{name:c}=e,s={x:0,y:0,r:1};y(()=>{t("svgPoint",o=r.createSVGPoint())});let i=Array(Q).fill().map(z),a=performance.now();return function n(e){const r=(e-a)*W;isNaN(r)&&console.log(r,e,a,W),t("animateTime",a=e),t("circles",i=function(n,e){return n.map(n=>{const{alpha:t,r:r}=n,o=r<.1?.9:r>.4?0:.2;if(t===o)return n;const c=t<o?1:-1,s=t+c*e*2;return c===(t<o?1:-1)?{...n,alpha:s}:{...n,alpha:o}})}(i,r)),t("circles",i=function(n,e){return n.map(n=>{const t=n.r+n.rSpeed*e,r=n.x+n.xSpeed*e,o=n.y+n.ySpeed*e;return t<I||t>R||r<-U||r>U||o<-U||o>U?z():{...n,r:t,x:r,y:o}})}(i,r)),t("circles",i=D(i,s,r)),t("circles",i=i.sort(({id:n},{id:e})=>n-e)),requestAnimationFrame(n)}(a),n.$set=(n=>{"name"in n&&t("name",c=n.name)}),{name:c,svg:r,circles:i,handleMousemove:function({clientX:n,clientY:e,currentTarget:c}){o.x=n,t("svgPoint",o),o.y=e,t("svgPoint",o);const i=o.matrixTransform(r.getScreenCTM().inverse());t("centre",s={x:i.x,y:i.y,r:30})},handleMouseleave:function(){t("centre",s={x:0,y:0,r:1})},svg_1_binding:function(n,e){t("svg",r=n)}}}return new class extends P{constructor(n){super(),T(this,n,Z,K,s,["name"])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
